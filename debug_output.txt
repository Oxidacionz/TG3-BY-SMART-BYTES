{"asctime": "2025-12-23T22:43:15-0400", "name": "app.cache.storage", "levelname": "INFO", "message": "InMemoryCacheStorage initialized: TTL=120s, MaxSize=100"}
{"asctime": "2025-12-23T22:43:15-0400", "name": "app.services.file_validator", "levelname": "INFO", "message": "ImageFileValidator initialized: max_size=5242880, types=['image/jpeg', 'image/jpg', 'image/png', 'image/webp']"}
{"asctime": "2025-12-23T22:43:16-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Using Gemini API key #1 of 5 available keys"}
{"asctime": "2025-12-23T22:43:16-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Gemini API configured with model: gemini-2.0-flash-exp"}
{"asctime": "2025-12-23T22:43:16-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\ude80 GeminiScannerService initialized with retry support (max 3 retries)"}
--- DEBUG POST /SCANNER ---
Sending POST request to /api/v1/scanner/ ...
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.file_validator", "levelname": "INFO", "message": "File validation passed: test.jpg, size=16, type=image/jpeg"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Using Gemini API key #1 of 5 available keys"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Gemini API configured with model: gemini-2.0-flash-exp"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\ude80 GeminiScannerService initialized with retry support (max 3 retries)"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.scanner_factory", "levelname": "INFO", "message": "Created new scanner instance: gemini"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udcca Total available API keys: 5"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udd04 Attempt 1/3 using API key #1"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Using Gemini API key #1 of 5 available keys"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Gemini API configured with model: gemini-2.0-flash-exp"}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udce4 Invoking Gemini API with prompt length 2280..."}
{"asctime": "2025-12-23T22:43:18-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udd0d Sending request to Gemini model gemini-2.0-flash-exp (Key #1)..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "ERROR", "message": "\u274c Gemini API error with key #1: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp\nPlease retry in 38.854777556s. [links {\n  description: \"Learn more about Gemini API quotas\"\n  url: \"https://ai.google.dev/gemini-api/docs/rate-limits\"\n}\n, violations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerDayPerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerMinutePerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count\"\n  quota_id: \"GenerateContentInputTokensPerModelPerMinute-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\n, retry_delay {\n  seconds: 38\n}\n]"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "WARNING", "message": "\u26a0\ufe0f Quota/rate limit error detected with key #1"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "WARNING", "message": "\u26a0\ufe0f Quota error with key #1, rotating to next key..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udd04 Attempt 2/3 using API key #2"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Using Gemini API key #2 of 5 available keys"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Gemini API configured with model: gemini-2.0-flash-exp"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udce4 Invoking Gemini API with prompt length 2280..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udd0d Sending request to Gemini model gemini-2.0-flash-exp (Key #2)..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "ERROR", "message": "\u274c Gemini API error with key #2: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\nPlease retry in 38.492849498s. [links {\n  description: \"Learn more about Gemini API quotas\"\n  url: \"https://ai.google.dev/gemini-api/docs/rate-limits\"\n}\n, violations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count\"\n  quota_id: \"GenerateContentInputTokensPerModelPerMinute-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerMinutePerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerDayPerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\n, retry_delay {\n  seconds: 38\n}\n]"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "WARNING", "message": "\u26a0\ufe0f Quota/rate limit error detected with key #2"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "WARNING", "message": "\u26a0\ufe0f Quota error with key #2, rotating to next key..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udd04 Attempt 3/3 using API key #3"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Using Gemini API key #3 of 5 available keys"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "Gemini API configured with model: gemini-2.0-flash-exp"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udce4 Invoking Gemini API with prompt length 2280..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "INFO", "message": "\ud83d\udd0d Sending request to Gemini model gemini-2.0-flash-exp (Key #3)..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "ERROR", "message": "\u274c Gemini API error with key #3: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp\nPlease retry in 38.016880302s. [links {\n  description: \"Learn more about Gemini API quotas\"\n  url: \"https://ai.google.dev/gemini-api/docs/rate-limits\"\n}\n, violations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerDayPerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerMinutePerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count\"\n  quota_id: \"GenerateContentInputTokensPerModelPerMinute-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\n, retry_delay {\n  seconds: 38\n}\n]"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "WARNING", "message": "\u26a0\ufe0f Quota/rate limit error detected with key #3"}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "WARNING", "message": "\u26a0\ufe0f Quota error with key #3, rotating to next key..."}
{"asctime": "2025-12-23T22:43:19-0400", "name": "app.services.gemini_scanner", "levelname": "ERROR", "message": "\u274c All 3 attempts failed. Last error: 429: Quota exceeded for current API key. Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp\nPlease retry in 38.016880302s. [links {\n  description: \"Learn more about Gemini API quotas\"\n  url: \"https://ai.google.dev/gemini-api/docs/rate-limits\"\n}\n, violations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerDayPerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerMinutePerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count\"\n  quota_id: \"GenerateContentInputTokensPerModelPerMinute-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\n, retry_delay {\n  seconds: 38\n}\n]"}
Status: 429
Response: {"detail":"Quota exceeded for current API key. Error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp\nPlease retry in 38.016880302s. [links {\n  description: \"Learn more about Gemini API quotas\"\n  url: \"https://ai.google.dev/gemini-api/docs/rate-limits\"\n}\n, violations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerDayPerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_requests\"\n  quota_id: \"GenerateRequestsPerMinutePerProjectPerModel-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\nviolations {\n  quota_metric: \"generativelanguage.googleapis.com/generate_content_free_tier_input_token_count\"\n  quota_id: \"GenerateContentInputTokensPerModelPerMinute-FreeTier\"\n  quota_dimensions {\n    key: \"model\"\n    value: \"gemini-2.0-flash-exp\"\n  }\n  quota_dimensions {\n    key: \"location\"\n    value: \"global\"\n  }\n}\n, retry_delay {\n  seconds: 38\n}\n]"}
